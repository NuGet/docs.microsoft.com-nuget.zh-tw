---
title: 目錄資源，NuGet V3 API
description: 目錄是在 nuget.org 上建立和刪除的所有套件的索引。
author: joelverhagen
ms.author: jver
ms.date: 10/30/2017
ms.topic: reference
ms.reviewer: kraigb
ms.openlocfilehash: 6c04453fec9beb7b0998953384ec60694e1213c1
ms.sourcegitcommit: af059dc776cfdcbad20baab2919b5d6dc1e9022d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/09/2021
ms.locfileid: "99990150"
---
# <a name="catalog"></a><span data-ttu-id="3306e-103">目錄</span><span class="sxs-lookup"><span data-stu-id="3306e-103">Catalog</span></span>

<span data-ttu-id="3306e-104">**目錄** 是記錄套件來源上所有封裝作業的資源，例如建立和刪除。</span><span class="sxs-lookup"><span data-stu-id="3306e-104">The **catalog** is a resource that records all package operations on a package source, such as creations and deletions.</span></span> <span data-ttu-id="3306e-105">目錄資源在 `Catalog` [服務索引](service-index.md)中有型別。</span><span class="sxs-lookup"><span data-stu-id="3306e-105">The catalog resource has the `Catalog` type in the [service index](service-index.md).</span></span> <span data-ttu-id="3306e-106">您可以使用此資源來 [查詢所有已發行的封裝](../guides/api/query-for-all-published-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="3306e-106">You can use this resource to [query for all published packages](../guides/api/query-for-all-published-packages.md).</span></span>

> [!Note]
> <span data-ttu-id="3306e-107">因為官方 NuGet 用戶端不使用目錄，所以並非所有套件來源都能執行目錄。</span><span class="sxs-lookup"><span data-stu-id="3306e-107">Because the catalog is not used by the official NuGet client, not all package sources implement the catalog.</span></span>

> [!Note]
> <span data-ttu-id="3306e-108">目前，中國未提供 nuget.org 目錄。</span><span class="sxs-lookup"><span data-stu-id="3306e-108">Currently, the nuget.org catalog is not available in China.</span></span> <span data-ttu-id="3306e-109">如需詳細資訊，請參閱 [NuGet/NuGetGallery # 4949](https://github.com/NuGet/NuGetGallery/issues/4949)。</span><span class="sxs-lookup"><span data-stu-id="3306e-109">For more details, see [NuGet/NuGetGallery#4949](https://github.com/NuGet/NuGetGallery/issues/4949).</span></span>

## <a name="versioning"></a><span data-ttu-id="3306e-110">版本控制</span><span class="sxs-lookup"><span data-stu-id="3306e-110">Versioning</span></span>

<span data-ttu-id="3306e-111">使用的 `@type` 值如下：</span><span class="sxs-lookup"><span data-stu-id="3306e-111">The following `@type` value is used:</span></span>

<span data-ttu-id="3306e-112">@type 值</span><span class="sxs-lookup"><span data-stu-id="3306e-112">@type value</span></span>   | <span data-ttu-id="3306e-113">備註</span><span class="sxs-lookup"><span data-stu-id="3306e-113">Notes</span></span>
------------- | -----
<span data-ttu-id="3306e-114">Catalog/3.0。0</span><span class="sxs-lookup"><span data-stu-id="3306e-114">Catalog/3.0.0</span></span> | <span data-ttu-id="3306e-115">初始版本</span><span class="sxs-lookup"><span data-stu-id="3306e-115">The initial release</span></span>

## <a name="base-url"></a><span data-ttu-id="3306e-116">基底 URL</span><span class="sxs-lookup"><span data-stu-id="3306e-116">Base URL</span></span>

<span data-ttu-id="3306e-117">下列 Api 的進入點 URL 是 `@id` 與上述資源值相關聯之屬性的值 `@type` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-117">The entry point URL for the following APIs is the value of the `@id` property associated with the aforementioned resource `@type` values.</span></span> <span data-ttu-id="3306e-118">本主題使用預留位置 URL `{@id}` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-118">This topic uses the placeholder URL `{@id}`.</span></span>

## <a name="http-methods"></a><span data-ttu-id="3306e-119">HTTP 方法</span><span class="sxs-lookup"><span data-stu-id="3306e-119">HTTP methods</span></span>

<span data-ttu-id="3306e-120">目錄資源中找到的所有 Url 都只支援 HTTP 方法 `GET` 和 `HEAD` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-120">All URLs found in the catalog resource support only the HTTP methods `GET` and `HEAD`.</span></span>

## <a name="catalog-index"></a><span data-ttu-id="3306e-121">目錄索引</span><span class="sxs-lookup"><span data-stu-id="3306e-121">Catalog index</span></span>

<span data-ttu-id="3306e-122">目錄索引是已知位置中的檔，其中有依時間順序排序的目錄專案清單。</span><span class="sxs-lookup"><span data-stu-id="3306e-122">The catalog index is a document in a well-known location that has a list of catalog items, ordered chronologically.</span></span> <span data-ttu-id="3306e-123">這是目錄資源的進入點。</span><span class="sxs-lookup"><span data-stu-id="3306e-123">It is the entry point of the catalog resource.</span></span>

<span data-ttu-id="3306e-124">索引是由目錄頁面所組成。</span><span class="sxs-lookup"><span data-stu-id="3306e-124">The index is comprised of catalog pages.</span></span> <span data-ttu-id="3306e-125">每個目錄頁面都包含類別目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-125">Each catalog page contains catalog items.</span></span> <span data-ttu-id="3306e-126">每個類別目錄專案代表一個在某個時間點與單一封裝相關的事件。</span><span class="sxs-lookup"><span data-stu-id="3306e-126">Each catalog item represents an event concerning a single package at a point in time.</span></span> <span data-ttu-id="3306e-127">類別目錄專案可以代表從套件來源建立、未列出、重新列入或刪除的封裝。</span><span class="sxs-lookup"><span data-stu-id="3306e-127">A catalog item can represent a package that was created, unlisted, relisted, or deleted from the package source.</span></span> <span data-ttu-id="3306e-128">藉由依時間連續處理類別目錄專案，用戶端就可以針對存在於 V3 套件來源的每個套件建立最新的觀點。</span><span class="sxs-lookup"><span data-stu-id="3306e-128">By processing the catalog items in chronological order, the client can build an up-to-date view of every package that exists on the V3 package source.</span></span>

<span data-ttu-id="3306e-129">簡單來說，目錄 blob 的階層式結構如下：</span><span class="sxs-lookup"><span data-stu-id="3306e-129">In short, catalog blobs have the following hierarchical structure:</span></span>

- <span data-ttu-id="3306e-130">**Index**：目錄的進入點。</span><span class="sxs-lookup"><span data-stu-id="3306e-130">**Index**: the entry point for the catalog.</span></span>
- <span data-ttu-id="3306e-131">**頁面**：類別目錄專案的群組。</span><span class="sxs-lookup"><span data-stu-id="3306e-131">**Page**: a grouping of catalog items.</span></span>
- <span data-ttu-id="3306e-132">分 **葉**：代表類別目錄專案的檔，這是單一套件狀態的快照集。</span><span class="sxs-lookup"><span data-stu-id="3306e-132">**Leaf**: a document representing a catalog item, which is a snapshot of a single package's state.</span></span>

<span data-ttu-id="3306e-133">每個目錄物件都有一個名為的屬性，它會在 `commitTimeStamp` 專案新增至目錄時表示。</span><span class="sxs-lookup"><span data-stu-id="3306e-133">Each catalog object has a property called the `commitTimeStamp` representing when the item was added to the catalog.</span></span> <span data-ttu-id="3306e-134">類別目錄專案會以批次的方式新增至目錄頁面，稱為「認可」。</span><span class="sxs-lookup"><span data-stu-id="3306e-134">Catalog items are added to a catalog page in batches called commits.</span></span> <span data-ttu-id="3306e-135">相同認可中的所有目錄專案都有相同的認可時間戳記 (`commitTimeStamp`) 和認可識別碼 (`commitId`) 。</span><span class="sxs-lookup"><span data-stu-id="3306e-135">All catalog items in the same commit have the same commit timestamp (`commitTimeStamp`) and commit ID (`commitId`).</span></span> <span data-ttu-id="3306e-136">放在相同認可中的類別目錄專案代表在套件來源的相同時間點周圍發生的事件。</span><span class="sxs-lookup"><span data-stu-id="3306e-136">Catalog items placed in the same commit represent events that happened around the same point in time on the package source.</span></span> <span data-ttu-id="3306e-137">目錄認可內沒有任何順序。</span><span class="sxs-lookup"><span data-stu-id="3306e-137">There is no ordering within a catalog commit.</span></span>

<span data-ttu-id="3306e-138">因為每個封裝識別碼和版本都是唯一的，所以認可中永遠不會有一個以上的類別目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-138">Because each package ID and version is unique, there will never be more than one catalog item in a commit.</span></span> <span data-ttu-id="3306e-139">這可確保單一套件的類別目錄專案一律可以明確地依據認可時間戳記來排序。</span><span class="sxs-lookup"><span data-stu-id="3306e-139">This ensures that catalog items for a single package can always be unambiguously ordered with respect to commit timestamp.</span></span>

<span data-ttu-id="3306e-140">每個目錄永遠不會有一個以上的認可 `commitTimeStamp` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-140">There is never be more than one commit to the catalog per `commitTimeStamp`.</span></span> <span data-ttu-id="3306e-141">換句話說， `commitId` 是的多餘 `commitTimeStamp` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-141">In other words, the `commitId` is redundant with the `commitTimeStamp`.</span></span>

<span data-ttu-id="3306e-142">相較于依封裝識別碼編制索引的 [封裝中繼資料資源](registration-base-url-resource.md)，目錄 (編制索引，而且只能依時間進行查詢) 。</span><span class="sxs-lookup"><span data-stu-id="3306e-142">In contrast to the [package metadata resource](registration-base-url-resource.md), which is indexed by package ID, the catalog is indexed (and queryable) only by time.</span></span>

<span data-ttu-id="3306e-143">類別目錄專案一律會以單純遞增的時間順序新增至目錄。</span><span class="sxs-lookup"><span data-stu-id="3306e-143">Catalog items are always added to the catalog in a monotonically increasing, chronological order.</span></span> <span data-ttu-id="3306e-144">這表示，如果在時間 X 新增了目錄認可，則不會在一開始就新增任何目錄認可，且時間小於或等於 X。</span><span class="sxs-lookup"><span data-stu-id="3306e-144">This means that if a catalog commit is added at time X then no catalog commit will ever be added with a time less than or equal to X.</span></span>

<span data-ttu-id="3306e-145">下列要求會提取目錄索引。</span><span class="sxs-lookup"><span data-stu-id="3306e-145">The following request fetches the catalog index.</span></span>

```
GET {@id}
```

<span data-ttu-id="3306e-146">目錄索引是 JSON 檔，其中包含具有下列屬性的物件：</span><span class="sxs-lookup"><span data-stu-id="3306e-146">The catalog index is a JSON document that contains an object with the following properties:</span></span>

<span data-ttu-id="3306e-147">名稱</span><span class="sxs-lookup"><span data-stu-id="3306e-147">Name</span></span>            | <span data-ttu-id="3306e-148">類型</span><span class="sxs-lookup"><span data-stu-id="3306e-148">Type</span></span>             | <span data-ttu-id="3306e-149">必要</span><span class="sxs-lookup"><span data-stu-id="3306e-149">Required</span></span> | <span data-ttu-id="3306e-150">備註</span><span class="sxs-lookup"><span data-stu-id="3306e-150">Notes</span></span>
--------------- | ---------------- | -------- | -----
<span data-ttu-id="3306e-151">commitId</span><span class="sxs-lookup"><span data-stu-id="3306e-151">commitId</span></span>        | <span data-ttu-id="3306e-152">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-152">string</span></span>           | <span data-ttu-id="3306e-153">是</span><span class="sxs-lookup"><span data-stu-id="3306e-153">yes</span></span>      | <span data-ttu-id="3306e-154">與最近認可相關聯的唯一識別碼</span><span class="sxs-lookup"><span data-stu-id="3306e-154">A unique ID associated with the most recent commit</span></span>
<span data-ttu-id="3306e-155">commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="3306e-155">commitTimeStamp</span></span> | <span data-ttu-id="3306e-156">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-156">string</span></span>           | <span data-ttu-id="3306e-157">是</span><span class="sxs-lookup"><span data-stu-id="3306e-157">yes</span></span>      | <span data-ttu-id="3306e-158">最近認可的時間戳記</span><span class="sxs-lookup"><span data-stu-id="3306e-158">A timestamp of the most recent commit</span></span>
<span data-ttu-id="3306e-159">count</span><span class="sxs-lookup"><span data-stu-id="3306e-159">count</span></span>           | <span data-ttu-id="3306e-160">整數</span><span class="sxs-lookup"><span data-stu-id="3306e-160">integer</span></span>          | <span data-ttu-id="3306e-161">是</span><span class="sxs-lookup"><span data-stu-id="3306e-161">yes</span></span>      | <span data-ttu-id="3306e-162">索引中的頁面數目</span><span class="sxs-lookup"><span data-stu-id="3306e-162">The number of pages in the index</span></span>
<span data-ttu-id="3306e-163">項目</span><span class="sxs-lookup"><span data-stu-id="3306e-163">items</span></span>           | <span data-ttu-id="3306e-164">物件的陣列</span><span class="sxs-lookup"><span data-stu-id="3306e-164">array of objects</span></span> | <span data-ttu-id="3306e-165">是</span><span class="sxs-lookup"><span data-stu-id="3306e-165">yes</span></span>      | <span data-ttu-id="3306e-166">物件的陣列，每個物件都代表一個頁面</span><span class="sxs-lookup"><span data-stu-id="3306e-166">A array of objects, each object representing a page</span></span>

<span data-ttu-id="3306e-167">陣列中的每個元素 `items` 都是物件，每個頁面都有一些最基本的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="3306e-167">Each element in the `items` array is an object with some minimal details about each page.</span></span> <span data-ttu-id="3306e-168">這些頁面物件不包含目錄 (專案) 。</span><span class="sxs-lookup"><span data-stu-id="3306e-168">These page objects do not contain the catalog leaves (items).</span></span> <span data-ttu-id="3306e-169">此陣列中的元素順序未定義。</span><span class="sxs-lookup"><span data-stu-id="3306e-169">The order of the elements in this array is not defined.</span></span> <span data-ttu-id="3306e-170">您可以使用屬性，在記憶體中的用戶端排列頁面的順序 `commitTimeStamp` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-170">Pages can be ordered by the client in memory using their `commitTimeStamp` property.</span></span>

<span data-ttu-id="3306e-171">引進新的頁面時， `count` 將會遞增，而新的物件將會出現在 `items` 陣列中。</span><span class="sxs-lookup"><span data-stu-id="3306e-171">As new pages are introduced, the `count` will be incremented and new objects will appear in the `items` array.</span></span>

<span data-ttu-id="3306e-172">當專案加入至目錄時，索引的 `commitId` 將會變更，而且 `commitTimeStamp` 會增加。</span><span class="sxs-lookup"><span data-stu-id="3306e-172">As items are added to the catalog, the index's `commitId` will change and the `commitTimeStamp` will increase.</span></span> <span data-ttu-id="3306e-173">這兩個屬性基本上是陣列中所有頁面 `commitId` 和 `commitTimeStamp` 值的摘要 `items` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-173">These two properties are essentially a summary over all page `commitId` and `commitTimeStamp` values in the `items` array.</span></span>

### <a name="catalog-page-object-in-the-index"></a><span data-ttu-id="3306e-174">索引中的類別目錄頁面物件</span><span class="sxs-lookup"><span data-stu-id="3306e-174">Catalog page object in the index</span></span>

<span data-ttu-id="3306e-175">在目錄索引的屬性中找到的類別目錄頁面物件 `items` 具有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="3306e-175">The catalog page objects found in the catalog index's `items` property have the following properties:</span></span>

<span data-ttu-id="3306e-176">名稱</span><span class="sxs-lookup"><span data-stu-id="3306e-176">Name</span></span>            | <span data-ttu-id="3306e-177">類型</span><span class="sxs-lookup"><span data-stu-id="3306e-177">Type</span></span>    | <span data-ttu-id="3306e-178">必要</span><span class="sxs-lookup"><span data-stu-id="3306e-178">Required</span></span> | <span data-ttu-id="3306e-179">備註</span><span class="sxs-lookup"><span data-stu-id="3306e-179">Notes</span></span>
--------------- | ------- | -------- | -----
@id             | <span data-ttu-id="3306e-180">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-180">string</span></span>  | <span data-ttu-id="3306e-181">是</span><span class="sxs-lookup"><span data-stu-id="3306e-181">yes</span></span>      | <span data-ttu-id="3306e-182">要提取目錄頁面的 URL</span><span class="sxs-lookup"><span data-stu-id="3306e-182">The URL to fetch catalog page</span></span>
<span data-ttu-id="3306e-183">commitId</span><span class="sxs-lookup"><span data-stu-id="3306e-183">commitId</span></span>        | <span data-ttu-id="3306e-184">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-184">string</span></span>  | <span data-ttu-id="3306e-185">是</span><span class="sxs-lookup"><span data-stu-id="3306e-185">yes</span></span>      | <span data-ttu-id="3306e-186">與此頁面中最新認可相關聯的唯一識別碼</span><span class="sxs-lookup"><span data-stu-id="3306e-186">A unique ID associated with the most recent commit in this page</span></span>
<span data-ttu-id="3306e-187">commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="3306e-187">commitTimeStamp</span></span> | <span data-ttu-id="3306e-188">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-188">string</span></span>  | <span data-ttu-id="3306e-189">是</span><span class="sxs-lookup"><span data-stu-id="3306e-189">yes</span></span>      | <span data-ttu-id="3306e-190">此頁面中最新認可的時間戳記</span><span class="sxs-lookup"><span data-stu-id="3306e-190">A timestamp of the most recent commit in this page</span></span>
<span data-ttu-id="3306e-191">count</span><span class="sxs-lookup"><span data-stu-id="3306e-191">count</span></span>           | <span data-ttu-id="3306e-192">整數</span><span class="sxs-lookup"><span data-stu-id="3306e-192">integer</span></span> | <span data-ttu-id="3306e-193">是</span><span class="sxs-lookup"><span data-stu-id="3306e-193">yes</span></span>      | <span data-ttu-id="3306e-194">目錄頁面中的專案數</span><span class="sxs-lookup"><span data-stu-id="3306e-194">The number of items in the catalog page</span></span>

<span data-ttu-id="3306e-195">與 [套件中繼資料資源](registration-base-url-resource.md) 不同的是，在某些情況下，內嵌會保留在索引中，而目錄離開永遠不會內嵌到索引中，而且一律必須使用頁面的 URL 來提取 `@id` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-195">In contrast to the [package metadata resource](registration-base-url-resource.md) which in some cases inlines leaves into the index, catalog leaves are never inlined into the index and must always be fetched by using the page's `@id` URL.</span></span>

### <a name="sample-request"></a><span data-ttu-id="3306e-196">範例要求</span><span class="sxs-lookup"><span data-stu-id="3306e-196">Sample request</span></span>

```
GET https://api.nuget.org/v3/catalog0/index.json
```

### <a name="sample-response"></a><span data-ttu-id="3306e-197">範例回應</span><span class="sxs-lookup"><span data-stu-id="3306e-197">Sample response</span></span>

[!code-JSON [catalog-index.json](./_data/catalog-index.json)]

## <a name="catalog-page"></a><span data-ttu-id="3306e-198">目錄頁面</span><span class="sxs-lookup"><span data-stu-id="3306e-198">Catalog page</span></span>

<span data-ttu-id="3306e-199">目錄頁面是目錄專案的集合。</span><span class="sxs-lookup"><span data-stu-id="3306e-199">The catalog page is a collection of catalog items.</span></span> <span data-ttu-id="3306e-200">這是使用 `@id` 目錄索引中找到的其中一個值所提取的檔。</span><span class="sxs-lookup"><span data-stu-id="3306e-200">It is a document fetched using one of the `@id` values found in the catalog index.</span></span> <span data-ttu-id="3306e-201">目錄頁面的 URL 不能是可預測的，且應該僅使用目錄索引來探索。</span><span class="sxs-lookup"><span data-stu-id="3306e-201">The URL to a catalog page is not intended to be predictable and should be discovered using only the catalog index.</span></span>

<span data-ttu-id="3306e-202">新的類別目錄專案只會以最高的認可時間戳記或新頁面新增至目錄索引中的頁面。</span><span class="sxs-lookup"><span data-stu-id="3306e-202">New catalog items are added to the page in the catalog index only with the highest commit timestamp or to a new page.</span></span> <span data-ttu-id="3306e-203">一旦將具有較高認可時間戳記的頁面新增至目錄之後，就不會將舊頁面新增至或變更。</span><span class="sxs-lookup"><span data-stu-id="3306e-203">Once a page with a higher commit timestamp is added to the catalog, older pages are never added to or changed.</span></span>

<span data-ttu-id="3306e-204">目錄分頁檔是具有下列屬性的 JSON 物件：</span><span class="sxs-lookup"><span data-stu-id="3306e-204">The catalog page document is a JSON object with the following properties:</span></span>

<span data-ttu-id="3306e-205">名稱</span><span class="sxs-lookup"><span data-stu-id="3306e-205">Name</span></span>            | <span data-ttu-id="3306e-206">類型</span><span class="sxs-lookup"><span data-stu-id="3306e-206">Type</span></span>             | <span data-ttu-id="3306e-207">必要</span><span class="sxs-lookup"><span data-stu-id="3306e-207">Required</span></span> | <span data-ttu-id="3306e-208">備註</span><span class="sxs-lookup"><span data-stu-id="3306e-208">Notes</span></span>
--------------- | ---------------- | -------- | -----
<span data-ttu-id="3306e-209">commitId</span><span class="sxs-lookup"><span data-stu-id="3306e-209">commitId</span></span>        | <span data-ttu-id="3306e-210">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-210">string</span></span>           | <span data-ttu-id="3306e-211">是</span><span class="sxs-lookup"><span data-stu-id="3306e-211">yes</span></span>      | <span data-ttu-id="3306e-212">與此頁面中最新認可相關聯的唯一識別碼</span><span class="sxs-lookup"><span data-stu-id="3306e-212">A unique ID associated with the most recent commit in this page</span></span>
<span data-ttu-id="3306e-213">commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="3306e-213">commitTimeStamp</span></span> | <span data-ttu-id="3306e-214">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-214">string</span></span>           | <span data-ttu-id="3306e-215">是</span><span class="sxs-lookup"><span data-stu-id="3306e-215">yes</span></span>      | <span data-ttu-id="3306e-216">此頁面中最新認可的時間戳記</span><span class="sxs-lookup"><span data-stu-id="3306e-216">A timestamp of the most recent commit in this page</span></span>
<span data-ttu-id="3306e-217">count</span><span class="sxs-lookup"><span data-stu-id="3306e-217">count</span></span>           | <span data-ttu-id="3306e-218">整數</span><span class="sxs-lookup"><span data-stu-id="3306e-218">integer</span></span>          | <span data-ttu-id="3306e-219">是</span><span class="sxs-lookup"><span data-stu-id="3306e-219">yes</span></span>      | <span data-ttu-id="3306e-220">頁面中的專案數</span><span class="sxs-lookup"><span data-stu-id="3306e-220">The number of items in the page</span></span>
<span data-ttu-id="3306e-221">項目</span><span class="sxs-lookup"><span data-stu-id="3306e-221">items</span></span>           | <span data-ttu-id="3306e-222">物件的陣列</span><span class="sxs-lookup"><span data-stu-id="3306e-222">array of objects</span></span> | <span data-ttu-id="3306e-223">是</span><span class="sxs-lookup"><span data-stu-id="3306e-223">yes</span></span>      | <span data-ttu-id="3306e-224">此頁面中的類別目錄專案</span><span class="sxs-lookup"><span data-stu-id="3306e-224">The catalog items in this page</span></span>
<span data-ttu-id="3306e-225">父系 (parent)</span><span class="sxs-lookup"><span data-stu-id="3306e-225">parent</span></span>          | <span data-ttu-id="3306e-226">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-226">string</span></span>           | <span data-ttu-id="3306e-227">是</span><span class="sxs-lookup"><span data-stu-id="3306e-227">yes</span></span>      | <span data-ttu-id="3306e-228">目錄索引的 URL</span><span class="sxs-lookup"><span data-stu-id="3306e-228">A URL to the catalog index</span></span>

<span data-ttu-id="3306e-229">陣列中的每個 `items` 專案都是一個物件，其中包含有關類別目錄專案的最小詳細資料。</span><span class="sxs-lookup"><span data-stu-id="3306e-229">Each element in the `items` array is an object with some minimal details about the catalog item.</span></span> <span data-ttu-id="3306e-230">這些專案物件不包含目錄專案的所有資料。</span><span class="sxs-lookup"><span data-stu-id="3306e-230">These item objects do not contain all of the catalog item's data.</span></span> <span data-ttu-id="3306e-231">未定義頁面的陣列中專案的順序 `items` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-231">The order of the items in the page's `items` array is not defined.</span></span> <span data-ttu-id="3306e-232">您可以使用物件的屬性，以記憶體中的用戶端來排序專案 `commitTimeStamp` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-232">Items can be ordered by the client in memory using their `commitTimeStamp` property.</span></span>

<span data-ttu-id="3306e-233">頁面中的目錄專案數目是由伺服器執行所定義。</span><span class="sxs-lookup"><span data-stu-id="3306e-233">The number of catalog items in a page is defined by server implementation.</span></span> <span data-ttu-id="3306e-234">針對 nuget.org，每個頁面中最多會有550個專案，但某些頁面的實際數目可能較小，這取決於下一次認可批次的大小。</span><span class="sxs-lookup"><span data-stu-id="3306e-234">For nuget.org, there are at most 550 items in each page, although the actual number may be smaller for some pages depending on the size of the next commit batch at the point in time.</span></span>

<span data-ttu-id="3306e-235">引進新的專案時， `count` 會遞增，並將新的類別目錄專案物件顯示在 `items` 陣列中。</span><span class="sxs-lookup"><span data-stu-id="3306e-235">As new items are introduced, the `count` is incremented and new catalog item objects appear in the `items` array.</span></span>

<span data-ttu-id="3306e-236">當專案加入至頁面時， `commitId` 變更和 `commitTimeStamp` 增加。</span><span class="sxs-lookup"><span data-stu-id="3306e-236">As items are added to the page, the `commitId` changes and the `commitTimeStamp` increases.</span></span> <span data-ttu-id="3306e-237">這兩個屬性基本上是 `commitId` 陣列中所有和 `commitTimeStamp` 值的摘要 `items` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-237">These two properties are essentially a summary over all `commitId` and `commitTimeStamp` values in the `items` array.</span></span>

### <a name="catalog-item-object-in-a-page"></a><span data-ttu-id="3306e-238">頁面中的類別目錄專案物件</span><span class="sxs-lookup"><span data-stu-id="3306e-238">Catalog item object in a page</span></span>

<span data-ttu-id="3306e-239">在目錄頁面的屬性中找到的類別目錄專案物件 `items` 具有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="3306e-239">The catalog item objects found in the catalog page's `items` property have the following properties:</span></span>

<span data-ttu-id="3306e-240">名稱</span><span class="sxs-lookup"><span data-stu-id="3306e-240">Name</span></span>            | <span data-ttu-id="3306e-241">類型</span><span class="sxs-lookup"><span data-stu-id="3306e-241">Type</span></span>    | <span data-ttu-id="3306e-242">必要</span><span class="sxs-lookup"><span data-stu-id="3306e-242">Required</span></span> | <span data-ttu-id="3306e-243">備註</span><span class="sxs-lookup"><span data-stu-id="3306e-243">Notes</span></span>
--------------- | ------- | -------- | -----
@id             | <span data-ttu-id="3306e-244">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-244">string</span></span>  | <span data-ttu-id="3306e-245">是</span><span class="sxs-lookup"><span data-stu-id="3306e-245">yes</span></span>      | <span data-ttu-id="3306e-246">提取類別目錄專案的 URL</span><span class="sxs-lookup"><span data-stu-id="3306e-246">The URL to fetch the catalog item</span></span>
@type           | <span data-ttu-id="3306e-247">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-247">string</span></span>  | <span data-ttu-id="3306e-248">是</span><span class="sxs-lookup"><span data-stu-id="3306e-248">yes</span></span>      | <span data-ttu-id="3306e-249">類別目錄專案的類型</span><span class="sxs-lookup"><span data-stu-id="3306e-249">The type of the catalog item</span></span>
<span data-ttu-id="3306e-250">commitId</span><span class="sxs-lookup"><span data-stu-id="3306e-250">commitId</span></span>        | <span data-ttu-id="3306e-251">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-251">string</span></span>  | <span data-ttu-id="3306e-252">是</span><span class="sxs-lookup"><span data-stu-id="3306e-252">yes</span></span>      | <span data-ttu-id="3306e-253">與此目錄專案相關聯的認可識別碼</span><span class="sxs-lookup"><span data-stu-id="3306e-253">The commit ID associated with this catalog item</span></span>
<span data-ttu-id="3306e-254">commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="3306e-254">commitTimeStamp</span></span> | <span data-ttu-id="3306e-255">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-255">string</span></span>  | <span data-ttu-id="3306e-256">是</span><span class="sxs-lookup"><span data-stu-id="3306e-256">yes</span></span>      | <span data-ttu-id="3306e-257">此類別目錄專案的認可時間戳記</span><span class="sxs-lookup"><span data-stu-id="3306e-257">The commit timestamp of this catalog item</span></span>
<span data-ttu-id="3306e-258">nuget： id</span><span class="sxs-lookup"><span data-stu-id="3306e-258">nuget:id</span></span>        | <span data-ttu-id="3306e-259">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-259">string</span></span>  | <span data-ttu-id="3306e-260">是</span><span class="sxs-lookup"><span data-stu-id="3306e-260">yes</span></span>      | <span data-ttu-id="3306e-261">這個分葉相關的套件識別碼</span><span class="sxs-lookup"><span data-stu-id="3306e-261">The package ID that this leaf is related to</span></span>
<span data-ttu-id="3306e-262">nuget：版本</span><span class="sxs-lookup"><span data-stu-id="3306e-262">nuget:version</span></span>   | <span data-ttu-id="3306e-263">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-263">string</span></span>  | <span data-ttu-id="3306e-264">是</span><span class="sxs-lookup"><span data-stu-id="3306e-264">yes</span></span>      | <span data-ttu-id="3306e-265">這個分葉相關的套件版本</span><span class="sxs-lookup"><span data-stu-id="3306e-265">The package version that this leaf is related to</span></span>

<span data-ttu-id="3306e-266">`@type`值會是下列兩個值的其中一個：</span><span class="sxs-lookup"><span data-stu-id="3306e-266">The `@type` value will be one of the following two values:</span></span>

1. <span data-ttu-id="3306e-267">`nuget:PackageDetails`：這會對應到 `PackageDetails` 目錄分葉檔中的型別。</span><span class="sxs-lookup"><span data-stu-id="3306e-267">`nuget:PackageDetails`: this corresponds to `PackageDetails` type in the catalog leaf document.</span></span>
1. <span data-ttu-id="3306e-268">`nuget:PackageDelete`：這會對應到 `PackageDelete` 目錄分葉檔中的型別。</span><span class="sxs-lookup"><span data-stu-id="3306e-268">`nuget:PackageDelete`: this corresponds to the `PackageDelete` type in the catalog leaf document.</span></span>

<span data-ttu-id="3306e-269">如需每個類型所代表之意義的詳細資訊，請參閱下列 [對應的專案類型](#item-types) 。</span><span class="sxs-lookup"><span data-stu-id="3306e-269">For more details about what each type means, see the [corresponding items type](#item-types) below.</span></span>

### <a name="sample-request"></a><span data-ttu-id="3306e-270">範例要求</span><span class="sxs-lookup"><span data-stu-id="3306e-270">Sample request</span></span>

```
GET https://api.nuget.org/v3/catalog0/page2926.json
```

### <a name="sample-response"></a><span data-ttu-id="3306e-271">範例回應</span><span class="sxs-lookup"><span data-stu-id="3306e-271">Sample response</span></span>

[!code-JSON [catalog-page.json](./_data/catalog-page.json)]

## <a name="catalog-leaf"></a><span data-ttu-id="3306e-272">目錄分葉</span><span class="sxs-lookup"><span data-stu-id="3306e-272">Catalog leaf</span></span>

<span data-ttu-id="3306e-273">目錄分葉包含特定封裝識別碼與版本在某個時間點的相關中繼資料。</span><span class="sxs-lookup"><span data-stu-id="3306e-273">The catalog leaf contains metadata about a specific package ID and version at some point in time.</span></span> <span data-ttu-id="3306e-274">這是使用 `@id` 在目錄頁面中找到的值所提取的檔。</span><span class="sxs-lookup"><span data-stu-id="3306e-274">It is a document fetched using the `@id` value found in a catalog page.</span></span> <span data-ttu-id="3306e-275">目錄分葉的 URL 不能是可預測的，且應該僅使用類別目錄頁面來探索。</span><span class="sxs-lookup"><span data-stu-id="3306e-275">The URL to a catalog leaf is not intended to be predictable and should be discovered using only a catalog page.</span></span>

<span data-ttu-id="3306e-276">目錄分葉檔是具有下列屬性的 JSON 物件：</span><span class="sxs-lookup"><span data-stu-id="3306e-276">The catalog leaf document is a JSON object with the following properties:</span></span>

<span data-ttu-id="3306e-277">名稱</span><span class="sxs-lookup"><span data-stu-id="3306e-277">Name</span></span>                    | <span data-ttu-id="3306e-278">類型</span><span class="sxs-lookup"><span data-stu-id="3306e-278">Type</span></span>                       | <span data-ttu-id="3306e-279">必要</span><span class="sxs-lookup"><span data-stu-id="3306e-279">Required</span></span> | <span data-ttu-id="3306e-280">備註</span><span class="sxs-lookup"><span data-stu-id="3306e-280">Notes</span></span>
----------------------- | -------------------------- | -------- | -----
@type                   | <span data-ttu-id="3306e-281">字串或字串陣列</span><span class="sxs-lookup"><span data-stu-id="3306e-281">string or array of strings</span></span> | <span data-ttu-id="3306e-282">是</span><span class="sxs-lookup"><span data-stu-id="3306e-282">yes</span></span>      | <span data-ttu-id="3306e-283">類別目錄專案)  (s</span><span class="sxs-lookup"><span data-stu-id="3306e-283">The type(s) of the catalog item</span></span>
<span data-ttu-id="3306e-284">目錄： commitId</span><span class="sxs-lookup"><span data-stu-id="3306e-284">catalog:commitId</span></span>        | <span data-ttu-id="3306e-285">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-285">string</span></span>                     | <span data-ttu-id="3306e-286">是</span><span class="sxs-lookup"><span data-stu-id="3306e-286">yes</span></span>      | <span data-ttu-id="3306e-287">與此目錄專案相關聯的認可識別碼</span><span class="sxs-lookup"><span data-stu-id="3306e-287">A commit ID associated with this catalog item</span></span>
<span data-ttu-id="3306e-288">目錄： commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="3306e-288">catalog:commitTimeStamp</span></span> | <span data-ttu-id="3306e-289">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-289">string</span></span>                     | <span data-ttu-id="3306e-290">是</span><span class="sxs-lookup"><span data-stu-id="3306e-290">yes</span></span>      | <span data-ttu-id="3306e-291">此類別目錄專案的認可時間戳記</span><span class="sxs-lookup"><span data-stu-id="3306e-291">The commit timestamp of this catalog item</span></span>
<span data-ttu-id="3306e-292">id</span><span class="sxs-lookup"><span data-stu-id="3306e-292">id</span></span>                      | <span data-ttu-id="3306e-293">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-293">string</span></span>                     | <span data-ttu-id="3306e-294">是</span><span class="sxs-lookup"><span data-stu-id="3306e-294">yes</span></span>      | <span data-ttu-id="3306e-295">目錄專案的封裝識別碼</span><span class="sxs-lookup"><span data-stu-id="3306e-295">The package ID of the catalog item</span></span>
<span data-ttu-id="3306e-296">published</span><span class="sxs-lookup"><span data-stu-id="3306e-296">published</span></span>               | <span data-ttu-id="3306e-297">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-297">string</span></span>                     | <span data-ttu-id="3306e-298">是</span><span class="sxs-lookup"><span data-stu-id="3306e-298">yes</span></span>      | <span data-ttu-id="3306e-299">封裝類別目錄專案的發行日期</span><span class="sxs-lookup"><span data-stu-id="3306e-299">The published date of the package catalog item</span></span>
<span data-ttu-id="3306e-300">version</span><span class="sxs-lookup"><span data-stu-id="3306e-300">version</span></span>                 | <span data-ttu-id="3306e-301">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-301">string</span></span>                     | <span data-ttu-id="3306e-302">是</span><span class="sxs-lookup"><span data-stu-id="3306e-302">yes</span></span>      | <span data-ttu-id="3306e-303">類別目錄專案的封裝版本</span><span class="sxs-lookup"><span data-stu-id="3306e-303">The package version of the catalog item</span></span>

### <a name="item-types"></a><span data-ttu-id="3306e-304">專案類型</span><span class="sxs-lookup"><span data-stu-id="3306e-304">Item types</span></span>

<span data-ttu-id="3306e-305">`@type`屬性是字串或字串陣列。</span><span class="sxs-lookup"><span data-stu-id="3306e-305">The `@type` property is a string or array of strings.</span></span> <span data-ttu-id="3306e-306">為了方便起見，如果 `@type` 值為字串，則應該將它視為任何大小為1的陣列。</span><span class="sxs-lookup"><span data-stu-id="3306e-306">For convenience, if the `@type` value is a string, it should be treated as any array of size one.</span></span> <span data-ttu-id="3306e-307">並非所有可能的值 `@type` 都記載。</span><span class="sxs-lookup"><span data-stu-id="3306e-307">Not all possible values for `@type` are documented.</span></span> <span data-ttu-id="3306e-308">不過，每個類別目錄專案都有下列兩個字串類型值的其中一個：</span><span class="sxs-lookup"><span data-stu-id="3306e-308">However, each catalog item has exactly one of the two following string type values:</span></span>

1. <span data-ttu-id="3306e-309">`PackageDetails`：表示封裝中繼資料的快照集</span><span class="sxs-lookup"><span data-stu-id="3306e-309">`PackageDetails`: represents a snapshot of package metadata</span></span>
1. <span data-ttu-id="3306e-310">`PackageDelete`：代表已刪除的封裝</span><span class="sxs-lookup"><span data-stu-id="3306e-310">`PackageDelete`: represents a package that was deleted</span></span>

### <a name="package-details-catalog-items"></a><span data-ttu-id="3306e-311">封裝詳細資料類別目錄專案</span><span class="sxs-lookup"><span data-stu-id="3306e-311">Package details catalog items</span></span>

<span data-ttu-id="3306e-312">具有類型的類別目錄專案 `PackageDetails` 包含特定封裝的封裝中繼資料的快照集 (識別碼和版本組合) 。</span><span class="sxs-lookup"><span data-stu-id="3306e-312">Catalog items with the type `PackageDetails` contain a snapshot of package metadata for a specific package (ID and version combination).</span></span> <span data-ttu-id="3306e-313">當套件來源遇到下列任何情況時，就會產生套件詳細資料類別目錄專案：</span><span class="sxs-lookup"><span data-stu-id="3306e-313">A package details catalog item is produced when a package source encounters any of the following scenarios:</span></span>

1. <span data-ttu-id="3306e-314">已 **推送** 套件。</span><span class="sxs-lookup"><span data-stu-id="3306e-314">A package is **pushed**.</span></span>
1. <span data-ttu-id="3306e-315">**列出** 套件。</span><span class="sxs-lookup"><span data-stu-id="3306e-315">A package is **listed**.</span></span>
1. <span data-ttu-id="3306e-316">未 **列出** 套件。</span><span class="sxs-lookup"><span data-stu-id="3306e-316">A package is **unlisted**.</span></span>
1. <span data-ttu-id="3306e-317">封裝是 **reflowed**。</span><span class="sxs-lookup"><span data-stu-id="3306e-317">A package is **reflowed**.</span></span>

<span data-ttu-id="3306e-318">封裝重新排列是一種系統管理手勢，基本上會產生未變更套件本身的現有封裝的假推送。</span><span class="sxs-lookup"><span data-stu-id="3306e-318">A package reflow is an administrative gesture that essentially generates a fake push of an existing package with no changes to the package itself.</span></span> <span data-ttu-id="3306e-319">在 nuget.org 上，在使用類別目錄的其中一個背景工作中修正 bug 之後，會使用重新排列。</span><span class="sxs-lookup"><span data-stu-id="3306e-319">On nuget.org, a reflow is used after fixing a bug in one of the background jobs which consume the catalog.</span></span>

<span data-ttu-id="3306e-320">取用類別目錄專案的用戶端不應嘗試判斷哪些案例會產生類別目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-320">Clients consuming the catalog items should not attempt to determine which of these scenarios produced the catalog item.</span></span> <span data-ttu-id="3306e-321">相反地，用戶端應該只使用類別目錄專案中包含的中繼資料來更新任何已維護的 view 或 index。</span><span class="sxs-lookup"><span data-stu-id="3306e-321">Instead, the client should simply update any maintained view or index with the metadata contained in the catalog item.</span></span> <span data-ttu-id="3306e-322">此外， (不斷) ，應妥善處理重複或重複的類別目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-322">Furthermore, duplicate or redundant catalog items should be handled gracefully (idempotently).</span></span>

<span data-ttu-id="3306e-323">套件詳細資料類別目錄專案除了 [包含在所有目錄離開](#catalog-leaf)的屬性之外，還具有下列屬性。</span><span class="sxs-lookup"><span data-stu-id="3306e-323">Package details catalog items have the following properties in addition to those [included on all catalog leaves](#catalog-leaf).</span></span>

<span data-ttu-id="3306e-324">名稱</span><span class="sxs-lookup"><span data-stu-id="3306e-324">Name</span></span>                    | <span data-ttu-id="3306e-325">類型</span><span class="sxs-lookup"><span data-stu-id="3306e-325">Type</span></span>                       | <span data-ttu-id="3306e-326">必要</span><span class="sxs-lookup"><span data-stu-id="3306e-326">Required</span></span> | <span data-ttu-id="3306e-327">備註</span><span class="sxs-lookup"><span data-stu-id="3306e-327">Notes</span></span>
----------------------- | -------------------------- | -------- | -----
<span data-ttu-id="3306e-328">authors</span><span class="sxs-lookup"><span data-stu-id="3306e-328">authors</span></span>                 | <span data-ttu-id="3306e-329">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-329">string</span></span>                     | <span data-ttu-id="3306e-330">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-330">no</span></span>       |
<span data-ttu-id="3306e-331">created</span><span class="sxs-lookup"><span data-stu-id="3306e-331">created</span></span>                 | <span data-ttu-id="3306e-332">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-332">string</span></span>                     | <span data-ttu-id="3306e-333">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-333">no</span></span>       | <span data-ttu-id="3306e-334">第一次建立封裝的時間戳記。</span><span class="sxs-lookup"><span data-stu-id="3306e-334">A timestamp of when the package was first created.</span></span> <span data-ttu-id="3306e-335">Fallback 屬性： `published` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-335">Fallback property: `published`.</span></span>
<span data-ttu-id="3306e-336">dependencyGroups</span><span class="sxs-lookup"><span data-stu-id="3306e-336">dependencyGroups</span></span>        | <span data-ttu-id="3306e-337">物件的陣列</span><span class="sxs-lookup"><span data-stu-id="3306e-337">array of objects</span></span>           | <span data-ttu-id="3306e-338">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-338">no</span></span>       | <span data-ttu-id="3306e-339">封裝的相依性（依目標 framework 分組） (與 [套件中繼資料資源相同的格式](registration-base-url-resource.md#package-dependency-group)) </span><span class="sxs-lookup"><span data-stu-id="3306e-339">The dependencies of the package, grouped by target framework ([same format as the package metadata resource](registration-base-url-resource.md#package-dependency-group))</span></span>
<span data-ttu-id="3306e-340">折舊</span><span class="sxs-lookup"><span data-stu-id="3306e-340">deprecation</span></span>             | <span data-ttu-id="3306e-341">物件 (object)</span><span class="sxs-lookup"><span data-stu-id="3306e-341">object</span></span>                     | <span data-ttu-id="3306e-342">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-342">no</span></span>       | <span data-ttu-id="3306e-343">與封裝相關聯的取代 (與 [套件中繼資料資源相同的格式](registration-base-url-resource.md#package-deprecation)) </span><span class="sxs-lookup"><span data-stu-id="3306e-343">The deprecation associated with the package ([same format as the package metadata resource](registration-base-url-resource.md#package-deprecation))</span></span>
<span data-ttu-id="3306e-344">description</span><span class="sxs-lookup"><span data-stu-id="3306e-344">description</span></span>             | <span data-ttu-id="3306e-345">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-345">string</span></span>                     | <span data-ttu-id="3306e-346">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-346">no</span></span>       |
<span data-ttu-id="3306e-347">iconUrl</span><span class="sxs-lookup"><span data-stu-id="3306e-347">iconUrl</span></span>                 | <span data-ttu-id="3306e-348">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-348">string</span></span>                     | <span data-ttu-id="3306e-349">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-349">no</span></span>       |
<span data-ttu-id="3306e-350">isPrerelease</span><span class="sxs-lookup"><span data-stu-id="3306e-350">isPrerelease</span></span>            | <span data-ttu-id="3306e-351">boolean</span><span class="sxs-lookup"><span data-stu-id="3306e-351">boolean</span></span>                    | <span data-ttu-id="3306e-352">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-352">no</span></span>       | <span data-ttu-id="3306e-353">套件版本是否為發行前版本。</span><span class="sxs-lookup"><span data-stu-id="3306e-353">Whether or not the package version is prerelease.</span></span> <span data-ttu-id="3306e-354">可以從偵測到 `version` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-354">Can be detected from `version`.</span></span>
<span data-ttu-id="3306e-355">語言</span><span class="sxs-lookup"><span data-stu-id="3306e-355">language</span></span>                | <span data-ttu-id="3306e-356">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-356">string</span></span>                     | <span data-ttu-id="3306e-357">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-357">no</span></span>       |
<span data-ttu-id="3306e-358">licenseUrl</span><span class="sxs-lookup"><span data-stu-id="3306e-358">licenseUrl</span></span>              | <span data-ttu-id="3306e-359">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-359">string</span></span>                     | <span data-ttu-id="3306e-360">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-360">no</span></span>       |
<span data-ttu-id="3306e-361">列出的</span><span class="sxs-lookup"><span data-stu-id="3306e-361">listed</span></span>                  | <span data-ttu-id="3306e-362">boolean</span><span class="sxs-lookup"><span data-stu-id="3306e-362">boolean</span></span>                    | <span data-ttu-id="3306e-363">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-363">no</span></span>       | <span data-ttu-id="3306e-364">是否列出套件</span><span class="sxs-lookup"><span data-stu-id="3306e-364">Whether or not the package is listed</span></span>
<span data-ttu-id="3306e-365">minClientVersion</span><span class="sxs-lookup"><span data-stu-id="3306e-365">minClientVersion</span></span>        | <span data-ttu-id="3306e-366">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-366">string</span></span>                     | <span data-ttu-id="3306e-367">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-367">no</span></span>       |
<span data-ttu-id="3306e-368">packageHash</span><span class="sxs-lookup"><span data-stu-id="3306e-368">packageHash</span></span>             | <span data-ttu-id="3306e-369">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-369">string</span></span>                     | <span data-ttu-id="3306e-370">是</span><span class="sxs-lookup"><span data-stu-id="3306e-370">yes</span></span>      | <span data-ttu-id="3306e-371">封裝的雜湊，使用[標準基底 64](https://tools.ietf.org/html/rfc4648#section-4)進行編碼</span><span class="sxs-lookup"><span data-stu-id="3306e-371">The hash of the package, encoding using [standard base 64](https://tools.ietf.org/html/rfc4648#section-4)</span></span>
<span data-ttu-id="3306e-372">packageHashAlgorithm</span><span class="sxs-lookup"><span data-stu-id="3306e-372">packageHashAlgorithm</span></span>    | <span data-ttu-id="3306e-373">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-373">string</span></span>                     | <span data-ttu-id="3306e-374">是</span><span class="sxs-lookup"><span data-stu-id="3306e-374">yes</span></span>      |
<span data-ttu-id="3306e-375">packageSize</span><span class="sxs-lookup"><span data-stu-id="3306e-375">packageSize</span></span>             | <span data-ttu-id="3306e-376">整數</span><span class="sxs-lookup"><span data-stu-id="3306e-376">integer</span></span>                    | <span data-ttu-id="3306e-377">是</span><span class="sxs-lookup"><span data-stu-id="3306e-377">yes</span></span>      | <span data-ttu-id="3306e-378">封裝的大小。 nupkg （以位元組為單位）</span><span class="sxs-lookup"><span data-stu-id="3306e-378">The size of the package .nupkg in bytes</span></span>
<span data-ttu-id="3306e-379">packageTypes</span><span class="sxs-lookup"><span data-stu-id="3306e-379">packageTypes</span></span>            | <span data-ttu-id="3306e-380">物件的陣列</span><span class="sxs-lookup"><span data-stu-id="3306e-380">array of objects</span></span>           | <span data-ttu-id="3306e-381">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-381">no</span></span>       | <span data-ttu-id="3306e-382">作者指定的封裝類型。</span><span class="sxs-lookup"><span data-stu-id="3306e-382">The package types specified by the author.</span></span>
<span data-ttu-id="3306e-383">projectUrl</span><span class="sxs-lookup"><span data-stu-id="3306e-383">projectUrl</span></span>              | <span data-ttu-id="3306e-384">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-384">string</span></span>                     | <span data-ttu-id="3306e-385">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-385">no</span></span>       |
<span data-ttu-id="3306e-386">releaseNotes</span><span class="sxs-lookup"><span data-stu-id="3306e-386">releaseNotes</span></span>            | <span data-ttu-id="3306e-387">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-387">string</span></span>                     | <span data-ttu-id="3306e-388">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-388">no</span></span>       |
<span data-ttu-id="3306e-389">requireLicenseAgreement</span><span class="sxs-lookup"><span data-stu-id="3306e-389">requireLicenseAgreement</span></span> | <span data-ttu-id="3306e-390">boolean</span><span class="sxs-lookup"><span data-stu-id="3306e-390">boolean</span></span>                    | <span data-ttu-id="3306e-391">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-391">no</span></span>       | <span data-ttu-id="3306e-392">假設 `false` 排除</span><span class="sxs-lookup"><span data-stu-id="3306e-392">Assume `false` if excluded</span></span>
<span data-ttu-id="3306e-393">總結</span><span class="sxs-lookup"><span data-stu-id="3306e-393">summary</span></span>                 | <span data-ttu-id="3306e-394">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-394">string</span></span>                     | <span data-ttu-id="3306e-395">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-395">no</span></span>       |
<span data-ttu-id="3306e-396">tags</span><span class="sxs-lookup"><span data-stu-id="3306e-396">tags</span></span>                    | <span data-ttu-id="3306e-397">字串陣列</span><span class="sxs-lookup"><span data-stu-id="3306e-397">array of strings</span></span>           | <span data-ttu-id="3306e-398">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-398">no</span></span>       |
<span data-ttu-id="3306e-399">title</span><span class="sxs-lookup"><span data-stu-id="3306e-399">title</span></span>                   | <span data-ttu-id="3306e-400">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-400">string</span></span>                     | <span data-ttu-id="3306e-401">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-401">no</span></span>       |
<span data-ttu-id="3306e-402">verbatimVersion</span><span class="sxs-lookup"><span data-stu-id="3306e-402">verbatimVersion</span></span>         | <span data-ttu-id="3306e-403">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-403">string</span></span>                     | <span data-ttu-id="3306e-404">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-404">no</span></span>       | <span data-ttu-id="3306e-405">最初在 nuspec 中找到的版本字串。</span><span class="sxs-lookup"><span data-stu-id="3306e-405">The version string as it's originally found in the .nuspec</span></span>
<span data-ttu-id="3306e-406">弱點</span><span class="sxs-lookup"><span data-stu-id="3306e-406">vulnerabilities</span></span>         | <span data-ttu-id="3306e-407">物件的陣列</span><span class="sxs-lookup"><span data-stu-id="3306e-407">array of objects</span></span>           | <span data-ttu-id="3306e-408">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-408">no</span></span>       | <span data-ttu-id="3306e-409">封裝的安全性弱點</span><span class="sxs-lookup"><span data-stu-id="3306e-409">The security vulnerabilities of the package</span></span>

<span data-ttu-id="3306e-410">封裝 `version` 屬性是正規化之後的完整版本字串。</span><span class="sxs-lookup"><span data-stu-id="3306e-410">The package `version` property is the full version string after normalization.</span></span> <span data-ttu-id="3306e-411">這表示 SemVer 2.0.0 組建資料可以包含在此。</span><span class="sxs-lookup"><span data-stu-id="3306e-411">This means that SemVer 2.0.0 build data can be included here.</span></span>

<span data-ttu-id="3306e-412">`created`時間戳記是套件來源第一次收到套件時，通常是在目錄專案的認可時間戳記之前的短時間。</span><span class="sxs-lookup"><span data-stu-id="3306e-412">The `created` timestamp is when the package was first received by the package source, which is typically a short time before the catalog item's commit timestamp.</span></span>

<span data-ttu-id="3306e-413">`packageHashAlgorithm`是伺服器執行所定義的字串，表示用來產生的雜湊演算法 `packageHash` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-413">The `packageHashAlgorithm` is a string defined by the server implementation representing the hashing algorithm used to produce the `packageHash`.</span></span> <span data-ttu-id="3306e-414">nuget.org 一律使用的 `packageHashAlgorithm` 值 `SHA512` 。</span><span class="sxs-lookup"><span data-stu-id="3306e-414">nuget.org always used the `packageHashAlgorithm` value of `SHA512`.</span></span>

<span data-ttu-id="3306e-415">`packageTypes`只有當作者指定了封裝類型時，才會顯示此屬性。</span><span class="sxs-lookup"><span data-stu-id="3306e-415">The `packageTypes` property will only be present if a package type was specified by the author.</span></span> <span data-ttu-id="3306e-416">如果存在，則一律會有至少一個 (1) 專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-416">If it is present, it will always have at least one (1) entry.</span></span> <span data-ttu-id="3306e-417">陣列中的每個專案 `packageTypes` 都是具有下列屬性的 JSON 物件：</span><span class="sxs-lookup"><span data-stu-id="3306e-417">Each item in the `packageTypes` array is a JSON object with the following properties:</span></span>

<span data-ttu-id="3306e-418">名稱</span><span class="sxs-lookup"><span data-stu-id="3306e-418">Name</span></span>      | <span data-ttu-id="3306e-419">類型</span><span class="sxs-lookup"><span data-stu-id="3306e-419">Type</span></span>    | <span data-ttu-id="3306e-420">必要</span><span class="sxs-lookup"><span data-stu-id="3306e-420">Required</span></span> | <span data-ttu-id="3306e-421">注意</span><span class="sxs-lookup"><span data-stu-id="3306e-421">Notes</span></span>
--------- | ------- | -------- | -----
<span data-ttu-id="3306e-422">NAME</span><span class="sxs-lookup"><span data-stu-id="3306e-422">name</span></span>      | <span data-ttu-id="3306e-423">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-423">string</span></span>  | <span data-ttu-id="3306e-424">是</span><span class="sxs-lookup"><span data-stu-id="3306e-424">yes</span></span>      | <span data-ttu-id="3306e-425">封裝類型的名稱。</span><span class="sxs-lookup"><span data-stu-id="3306e-425">The name of the package type.</span></span>
<span data-ttu-id="3306e-426">version</span><span class="sxs-lookup"><span data-stu-id="3306e-426">version</span></span>    | <span data-ttu-id="3306e-427">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-427">string</span></span>  | <span data-ttu-id="3306e-428">不可以</span><span class="sxs-lookup"><span data-stu-id="3306e-428">no</span></span>       | <span data-ttu-id="3306e-429">封裝類型的版本。</span><span class="sxs-lookup"><span data-stu-id="3306e-429">The version of the package type.</span></span> <span data-ttu-id="3306e-430">只有當作者在 nuspec 中明確指定版本時，才會出現。</span><span class="sxs-lookup"><span data-stu-id="3306e-430">Only present if the author explicitly specified a version in the nuspec.</span></span>

<span data-ttu-id="3306e-431">`published`時間戳記是上次列出封裝的時間。</span><span class="sxs-lookup"><span data-stu-id="3306e-431">The `published` timestamp is the time when the package was last listed.</span></span>

> [!Note]
> <span data-ttu-id="3306e-432">在 nuget.org 上， `published` 當封裝未列出時，此值會設定為1900年。</span><span class="sxs-lookup"><span data-stu-id="3306e-432">On nuget.org, the `published` value is set to the year 1900 when the package is unlisted.</span></span>

#### <a name="vulnerabilities"></a><span data-ttu-id="3306e-433">弱點</span><span class="sxs-lookup"><span data-stu-id="3306e-433">Vulnerabilities</span></span>

<span data-ttu-id="3306e-434">`vulnerability` 物件的陣列。</span><span class="sxs-lookup"><span data-stu-id="3306e-434">An array of `vulnerability` objects.</span></span> <span data-ttu-id="3306e-435">每個弱點都有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="3306e-435">Each vulnerability has the following properties:</span></span>

<span data-ttu-id="3306e-436">名稱</span><span class="sxs-lookup"><span data-stu-id="3306e-436">Name</span></span>         | <span data-ttu-id="3306e-437">類型</span><span class="sxs-lookup"><span data-stu-id="3306e-437">Type</span></span>   | <span data-ttu-id="3306e-438">必要</span><span class="sxs-lookup"><span data-stu-id="3306e-438">Required</span></span> | <span data-ttu-id="3306e-439">備註</span><span class="sxs-lookup"><span data-stu-id="3306e-439">Notes</span></span>
------------ | ------ | -------- | -----
<span data-ttu-id="3306e-440">advisoryUrl</span><span class="sxs-lookup"><span data-stu-id="3306e-440">advisoryUrl</span></span>  | <span data-ttu-id="3306e-441">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-441">string</span></span> | <span data-ttu-id="3306e-442">是</span><span class="sxs-lookup"><span data-stu-id="3306e-442">yes</span></span>      | <span data-ttu-id="3306e-443">封裝之安全性諮詢的位置</span><span class="sxs-lookup"><span data-stu-id="3306e-443">Location of security advisory for the package</span></span>
<span data-ttu-id="3306e-444">severity</span><span class="sxs-lookup"><span data-stu-id="3306e-444">severity</span></span>     | <span data-ttu-id="3306e-445">字串</span><span class="sxs-lookup"><span data-stu-id="3306e-445">string</span></span> | <span data-ttu-id="3306e-446">是</span><span class="sxs-lookup"><span data-stu-id="3306e-446">yes</span></span>      | <span data-ttu-id="3306e-447">摘要報告的嚴重性： "0" = Low、"1" = 適中、"2" = High、"3" = 重大</span><span class="sxs-lookup"><span data-stu-id="3306e-447">Severity of advisory: "0" = Low, "1" = Moderate, "2" = High, "3" = Critical</span></span>

<span data-ttu-id="3306e-448">如果 `severity` 屬性包含的值不是此處所列的值，則會將通報的嚴重性視為低。</span><span class="sxs-lookup"><span data-stu-id="3306e-448">If the `severity` property contains values other than those listed here, the severity of the advisory is to be treated as Low.</span></span>

#### <a name="sample-request"></a><span data-ttu-id="3306e-449">範例要求</span><span class="sxs-lookup"><span data-stu-id="3306e-449">Sample request</span></span>

```
GET https://api.nuget.org/v3/catalog0/data/2015.02.01.11.18.40/windowsazure.storage.1.0.0.json
```

#### <a name="sample-response"></a><span data-ttu-id="3306e-450">範例回應</span><span class="sxs-lookup"><span data-stu-id="3306e-450">Sample response</span></span>

[!code-JSON [catalog-package-details.json](./_data/catalog-package-details.json)]

### <a name="package-delete-catalog-items"></a><span data-ttu-id="3306e-451">封裝刪除目錄專案</span><span class="sxs-lookup"><span data-stu-id="3306e-451">Package delete catalog items</span></span>

<span data-ttu-id="3306e-452">型別為的類別目錄專案 `PackageDelete` 包含一組最基本的資訊，指出已從套件來源刪除封裝，且不再提供任何封裝作業 (例如還原) 。</span><span class="sxs-lookup"><span data-stu-id="3306e-452">Catalog items with the type `PackageDelete` contain a minimal set of information indicating to catalog clients that a package has been deleted from the package source and is no longer available for any package operation (such as restore).</span></span>

> [!NOTE]
> <span data-ttu-id="3306e-453">您可以使用相同的套件識別碼和版本來刪除封裝，並于稍後重新發行。</span><span class="sxs-lookup"><span data-stu-id="3306e-453">It is possible for a package to be deleted and later republished using the same package ID and version.</span></span> <span data-ttu-id="3306e-454">在 nuget.org 上，這是非常罕見的情況，因為它會破壞官方用戶端假設套件識別碼和版本表示特定的封裝內容。</span><span class="sxs-lookup"><span data-stu-id="3306e-454">On nuget.org, this is a very rare case as it breaks the official client's assumption that a package ID and version imply a specific package content.</span></span> <span data-ttu-id="3306e-455">如需在 nuget.org 上刪除封裝的詳細資訊，請參閱 [我們的原則](../nuget-org/policies/deleting-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="3306e-455">For more information about package deletion on nuget.org, see [our policy](../nuget-org/policies/deleting-packages.md).</span></span>

<span data-ttu-id="3306e-456">套件刪除目錄專案除了 [包含在所有目錄離開](#catalog-leaf)的屬性之外，還沒有其他屬性。</span><span class="sxs-lookup"><span data-stu-id="3306e-456">Package delete catalog items have no additional properties in addition to those [included on all catalog leaves](#catalog-leaf).</span></span>

<span data-ttu-id="3306e-457">`version`屬性是在 nuspec 中找到的原始版本字串。</span><span class="sxs-lookup"><span data-stu-id="3306e-457">The `version` property is the original version string found in the package .nuspec.</span></span>

<span data-ttu-id="3306e-458">`published`屬性是刪除封裝的時間，通常是在目錄專案的認可時間戳記之前的短時間。</span><span class="sxs-lookup"><span data-stu-id="3306e-458">The `published` property is the time when package was deleted, which is typically as short time before the catalog item's commit timestamp.</span></span>

#### <a name="sample-request"></a><span data-ttu-id="3306e-459">範例要求</span><span class="sxs-lookup"><span data-stu-id="3306e-459">Sample request</span></span>

```
GET https://api.nuget.org/v3/catalog0/data/2017.11.02.00.40.00/netstandard1.4_lib.1.0.0-test.json
```

#### <a name="sample-response"></a><span data-ttu-id="3306e-460">範例回應</span><span class="sxs-lookup"><span data-stu-id="3306e-460">Sample response</span></span>

[!code-JSON [catalog-package-delete.json](./_data/catalog-package-delete.json)]

## <a name="cursor"></a><span data-ttu-id="3306e-461">資料指標</span><span class="sxs-lookup"><span data-stu-id="3306e-461">Cursor</span></span>

### <a name="overview"></a><span data-ttu-id="3306e-462">概觀</span><span class="sxs-lookup"><span data-stu-id="3306e-462">Overview</span></span>

<span data-ttu-id="3306e-463">本節說明的用戶端概念（雖然不一定是由通訊協定強制執行）應該是任何實際目錄用戶端執行的一部分。</span><span class="sxs-lookup"><span data-stu-id="3306e-463">This section describes a client concept that, although is not necessarily mandated by the protocol, should be part of any practical catalog client implementation.</span></span>

<span data-ttu-id="3306e-464">因為目錄是依時間編制索引的僅附加資料結構，用戶端應該將資料 **指標** 儲存在本機，表示用戶端處理類別目錄專案的時間點。</span><span class="sxs-lookup"><span data-stu-id="3306e-464">Because the catalog is an append-only data structure indexed by time, the client should store a **cursor** locally, representing up to what point in time the client has processed catalog items.</span></span> <span data-ttu-id="3306e-465">請注意，此資料指標值絕對不應該使用用戶端的機器時鐘來產生。</span><span class="sxs-lookup"><span data-stu-id="3306e-465">Note that this cursor value should never be generated using the client's machine clock.</span></span> <span data-ttu-id="3306e-466">相反地，此值應該來自目錄物件的 `commitTimestamp` 值。</span><span class="sxs-lookup"><span data-stu-id="3306e-466">Instead, the value should come from a catalog object's `commitTimestamp` value.</span></span>

<span data-ttu-id="3306e-467">每次用戶端想要處理套件來源上的新事件時，它只需要查詢目錄，就會有認可時間戳記大於其儲存資料指標的所有目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-467">Every time the client wants to process new events on the package source, it need only query the catalog for all catalog items with a commit timestamp greater than its stored cursor.</span></span> <span data-ttu-id="3306e-468">在用戶端成功處理所有新的類別目錄專案之後，它會記錄剛剛處理的目錄專案的最新認可時間戳記，做為新的資料指標值。</span><span class="sxs-lookup"><span data-stu-id="3306e-468">After the client successfully processes all new catalog items, it records the latest commit timestamp of catalog items just processed as its new cursor value.</span></span>

<span data-ttu-id="3306e-469">使用這種方法，用戶端可以確保永遠不會錯過任何在套件來源上發生的封裝事件。</span><span class="sxs-lookup"><span data-stu-id="3306e-469">Using this approach, the client can be sure to never miss any package events that occurred on the package source.</span></span>
<span data-ttu-id="3306e-470">此外，用戶端永遠不需要在資料指標記錄的認可時間戳記之前重新處理舊的事件。</span><span class="sxs-lookup"><span data-stu-id="3306e-470">Additionally, the client never has to reprocess old events prior to the cursor's recorded commit timestamp.</span></span>

<span data-ttu-id="3306e-471">這項強大的資料指標概念用於許多 nuget.org 背景工作，可用來將 V3 API 本身保持在最新狀態。</span><span class="sxs-lookup"><span data-stu-id="3306e-471">This powerful concept of cursors is used for many of nuget.org background jobs and is used to keep the V3 API itself up-to-date.</span></span> 

### <a name="initial-value"></a><span data-ttu-id="3306e-472">初始值</span><span class="sxs-lookup"><span data-stu-id="3306e-472">Initial value</span></span>

<span data-ttu-id="3306e-473">當目錄用戶端第一次啟動時 (，因此沒有任何資料指標值) ，它應該使用的預設資料指標值。NET 的 `System.DateTimeOffset.MinValue` 或一些類似的最小表示時間戳記的概念。</span><span class="sxs-lookup"><span data-stu-id="3306e-473">When the catalog client is starting for the very first time (and therefore has no cursor value), it should use a default cursor value of .NET's `System.DateTimeOffset.MinValue` or some such analogous notion of minimum representable timestamp.</span></span>

### <a name="iterating-over-catalog-items"></a><span data-ttu-id="3306e-474">反覆運算類別目錄專案</span><span class="sxs-lookup"><span data-stu-id="3306e-474">Iterating over catalog items</span></span>

<span data-ttu-id="3306e-475">若要查詢下一組要處理的類別目錄專案，用戶端應該：</span><span class="sxs-lookup"><span data-stu-id="3306e-475">To query for the next set of catalog items to process, the client should:</span></span>

1. <span data-ttu-id="3306e-476">從本機存放區提取記錄的資料指標值。</span><span class="sxs-lookup"><span data-stu-id="3306e-476">Fetch the recorded cursor value from a local store.</span></span>
1. <span data-ttu-id="3306e-477">下載並還原序列化目錄索引。</span><span class="sxs-lookup"><span data-stu-id="3306e-477">Download and deserialize the catalog index.</span></span>
1. <span data-ttu-id="3306e-478">尋找認可時間戳記 *大於* 資料指標的所有目錄頁面。</span><span class="sxs-lookup"><span data-stu-id="3306e-478">Find all catalog pages with a commit timestamp *greater than* the cursor.</span></span>
1. <span data-ttu-id="3306e-479">宣告要處理之類別目錄專案的空白清單。</span><span class="sxs-lookup"><span data-stu-id="3306e-479">Declare an empty list of catalog items to process.</span></span>
1. <span data-ttu-id="3306e-480">在步驟3中符合的每個目錄頁面：</span><span class="sxs-lookup"><span data-stu-id="3306e-480">For each catalog page matched in step 3:</span></span>
   1. <span data-ttu-id="3306e-481">下載並還原序列化目錄頁面。</span><span class="sxs-lookup"><span data-stu-id="3306e-481">Download and deserialized the catalog page.</span></span>
   1. <span data-ttu-id="3306e-482">尋找認可時間戳記 *大於* 資料指標的所有目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-482">Find all catalog items with a commit timestamp *greater than* the cursor.</span></span>
   1. <span data-ttu-id="3306e-483">將所有相符的目錄專案加入至步驟4中所宣告的清單。</span><span class="sxs-lookup"><span data-stu-id="3306e-483">Add all matching catalog items to the list declared in step 4.</span></span>
1. <span data-ttu-id="3306e-484">依認可時間戳記排序類別目錄專案清單。</span><span class="sxs-lookup"><span data-stu-id="3306e-484">Sort the catalog item list by commit timestamp.</span></span>
1. <span data-ttu-id="3306e-485">依序處理每個類別目錄專案：</span><span class="sxs-lookup"><span data-stu-id="3306e-485">Process each catalog item in sequence:</span></span>
   1. <span data-ttu-id="3306e-486">下載並還原序列化類別目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-486">Download and deserialize the catalog item.</span></span>
   1. <span data-ttu-id="3306e-487">適當地回應類別目錄專案的類型。</span><span class="sxs-lookup"><span data-stu-id="3306e-487">React appropriately to the catalog item's type.</span></span>
   1. <span data-ttu-id="3306e-488">以用戶端特定的方式處理類別目錄專案檔案。</span><span class="sxs-lookup"><span data-stu-id="3306e-488">Process the catalog item document in a client-specific fashion.</span></span>
1. <span data-ttu-id="3306e-489">記錄最後一個類別目錄專案的認可時間戳記，做為新的資料指標值。</span><span class="sxs-lookup"><span data-stu-id="3306e-489">Record the last catalog item's commit timestamp as the new cursor value.</span></span>

<span data-ttu-id="3306e-490">使用這個基本演算法，用戶端執行可以建立封裝來源上所有可用套件的完整觀點。</span><span class="sxs-lookup"><span data-stu-id="3306e-490">With this basic algorithm, the client implementation can build up a complete view of all packages available on the package source.</span></span> <span data-ttu-id="3306e-491">用戶端只需要定期執行此演算法，就能隨時留意到套件來源的最新變更。</span><span class="sxs-lookup"><span data-stu-id="3306e-491">The client need only execute this algorithm periodically to always be aware of the latest changes to the package source.</span></span>

> [!Note]
> <span data-ttu-id="3306e-492">這是 nuget.org 用來讓 [套件中繼資料](registration-base-url-resource.md)、 [封裝內容](package-base-address-resource.md)、 [搜尋](search-query-service-resource.md) 和 [自動完成](search-autocomplete-service-resource.md) 資源保持在最新狀態的演算法。</span><span class="sxs-lookup"><span data-stu-id="3306e-492">This is the algorithm that nuget.org uses to keep the [Package Metadata](registration-base-url-resource.md), [Package Content](package-base-address-resource.md), [Search](search-query-service-resource.md) and [Autocomplete](search-autocomplete-service-resource.md) resources up to date.</span></span>

### <a name="dependent-cursors"></a><span data-ttu-id="3306e-493">相依資料指標</span><span class="sxs-lookup"><span data-stu-id="3306e-493">Dependent cursors</span></span>

<span data-ttu-id="3306e-494">假設有兩個目錄用戶端具有固有的相依性，其中一個用戶端的輸出相依于另一個用戶端的輸出。</span><span class="sxs-lookup"><span data-stu-id="3306e-494">Suppose there are two catalog clients that have an inherent dependency where one client's output depends on another client's output.</span></span> 

#### <a name="example"></a><span data-ttu-id="3306e-495">範例</span><span class="sxs-lookup"><span data-stu-id="3306e-495">Example</span></span>

<span data-ttu-id="3306e-496">例如，在 nuget.org 上，新發佈的套件不應該出現在搜尋資源中，就會出現在套件中繼資料資源中。</span><span class="sxs-lookup"><span data-stu-id="3306e-496">For example, on nuget.org a newly published package should not appear in the search resource before it appears in the package metadata resource.</span></span> <span data-ttu-id="3306e-497">這是因為官方 NuGet 用戶端所執行的「還原」作業會使用套件中繼資料資源。</span><span class="sxs-lookup"><span data-stu-id="3306e-497">This is because the "restore" operation performed by the official NuGet client uses the package metadata resource.</span></span> <span data-ttu-id="3306e-498">如果客戶使用搜尋服務探索套件，則應該能夠使用套件中繼資料資源成功還原該套件。</span><span class="sxs-lookup"><span data-stu-id="3306e-498">If a customer discovers a package using the search service, they should be able to successfully restore that package using the package metadata resource.</span></span> <span data-ttu-id="3306e-499">換句話說，搜尋資源取決於封裝中繼資料資源。</span><span class="sxs-lookup"><span data-stu-id="3306e-499">In other words, the search resource depends on the package metadata resource.</span></span> <span data-ttu-id="3306e-500">每個資源都有目錄用戶端背景工作更新該資源。</span><span class="sxs-lookup"><span data-stu-id="3306e-500">Each resource has a catalog client background job updating that resource.</span></span> <span data-ttu-id="3306e-501">每個用戶端都有自己的資料指標。</span><span class="sxs-lookup"><span data-stu-id="3306e-501">Each client has its own cursor.</span></span>

<span data-ttu-id="3306e-502">由於這兩個資源都是從目錄建立的，因此更新搜尋資源之目錄用戶端的資料指標 *不能超過* 套件中繼資料目錄用戶端的資料指標。</span><span class="sxs-lookup"><span data-stu-id="3306e-502">Since both resources are built off of the catalog, the cursor of the catalog client that updates the search resource *must not go beyond* the cursor of the package metadata catalog client.</span></span>

#### <a name="algorithm"></a><span data-ttu-id="3306e-503">演算法</span><span class="sxs-lookup"><span data-stu-id="3306e-503">Algorithm</span></span>

<span data-ttu-id="3306e-504">若要執行這種限制，只要將上述演算法修改為：</span><span class="sxs-lookup"><span data-stu-id="3306e-504">To implement this restriction, simply modify the algorithm above to be:</span></span>

1. <span data-ttu-id="3306e-505">從本機存放區提取記錄的資料指標值。</span><span class="sxs-lookup"><span data-stu-id="3306e-505">Fetch the recorded cursor value from a local store.</span></span>
1. <span data-ttu-id="3306e-506">下載並還原序列化目錄索引。</span><span class="sxs-lookup"><span data-stu-id="3306e-506">Download and deserialize the catalog index.</span></span>
1. <span data-ttu-id="3306e-507">尋找認可時間戳記 *大於\*\*\*或等於*\* 相依性資料指標的所有目錄頁面。</span><span class="sxs-lookup"><span data-stu-id="3306e-507">Find all catalog pages with a commit timestamp *greater than* the cursor **less than or equal to the dependency's cursor.**</span></span>
1. <span data-ttu-id="3306e-508">宣告要處理之類別目錄專案的空白清單。</span><span class="sxs-lookup"><span data-stu-id="3306e-508">Declare an empty list of catalog items to process.</span></span>
1. <span data-ttu-id="3306e-509">在步驟3中符合的每個目錄頁面：</span><span class="sxs-lookup"><span data-stu-id="3306e-509">For each catalog page matched in step 3:</span></span>
   1. <span data-ttu-id="3306e-510">下載並還原序列化目錄頁面。</span><span class="sxs-lookup"><span data-stu-id="3306e-510">Download and deserialized the catalog page.</span></span>
   1. <span data-ttu-id="3306e-511">尋找認可時間戳記 *大於\*\*\*或等於*\* 相依性資料指標的所有目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-511">Find all catalog items with a commit timestamp *greater than* the cursor **less than or equal to the dependency's cursor.**</span></span>
   1. <span data-ttu-id="3306e-512">將所有相符的目錄專案加入至步驟4中所宣告的清單。</span><span class="sxs-lookup"><span data-stu-id="3306e-512">Add all matching catalog items to the list declared in step 4.</span></span>
1. <span data-ttu-id="3306e-513">依認可時間戳記排序類別目錄專案清單。</span><span class="sxs-lookup"><span data-stu-id="3306e-513">Sort the catalog item list by commit timestamp.</span></span>
1. <span data-ttu-id="3306e-514">依序處理每個類別目錄專案：</span><span class="sxs-lookup"><span data-stu-id="3306e-514">Process each catalog item in sequence:</span></span>
   1. <span data-ttu-id="3306e-515">下載並還原序列化類別目錄專案。</span><span class="sxs-lookup"><span data-stu-id="3306e-515">Download and deserialize the catalog item.</span></span>
   1. <span data-ttu-id="3306e-516">適當地回應類別目錄專案的類型。</span><span class="sxs-lookup"><span data-stu-id="3306e-516">React appropriately to the catalog item's type.</span></span>
   1. <span data-ttu-id="3306e-517">以用戶端特定的方式處理類別目錄專案檔案。</span><span class="sxs-lookup"><span data-stu-id="3306e-517">Process the catalog item document in a client-specific fashion.</span></span>
1. <span data-ttu-id="3306e-518">記錄最後一個類別目錄專案的認可時間戳記，做為新的資料指標值。</span><span class="sxs-lookup"><span data-stu-id="3306e-518">Record the last catalog item's commit timestamp as the new cursor value.</span></span>

<span data-ttu-id="3306e-519">使用這個修改過的演算法，您可以建立相依目錄用戶端的系統，這些用戶端會產生自己的特定索引、成品等等。</span><span class="sxs-lookup"><span data-stu-id="3306e-519">Using this modified algorithm, you can build a system of dependent catalog clients all producing their own specific indexes, artifacts, etc.</span></span>
