---
title: NuGet 警告 NU5130
description: NU5130 警告碼
author: zivkan
ms.date: 09/16/2019
ms.topic: reference
ms.reviewer: karann
f1_keywords:
- NU5130
ms.openlocfilehash: a20a8623450b6277c1a3d19293bae2f2c5e1ddf3
ms.sourcegitcommit: e4b0ff4460865db6dc7bc9f20e9f644d98493011
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/26/2019
ms.locfileid: "71307556"
---
# <a name="nuget-warning-nu5130"></a><span data-ttu-id="ccb05-103">NuGet 警告 NU5130</span><span class="sxs-lookup"><span data-stu-id="ccb05-103">NuGet Warning NU5130</span></span>

<pre>Some target frameworks declared in the dependencies group of the nuspec and the lib/ref folder have compatible matches, but not exact matches in the other location. Unless intentional, consult the list of actions below:
- Add a dependency group for .NETFramework4.7.2 to the nuspec</pre>

### <a name="issue"></a><span data-ttu-id="ccb05-104">問題</span><span class="sxs-lookup"><span data-stu-id="ccb05-104">Issue</span></span>

<span data-ttu-id="ccb05-105">封裝`lib/<tfm>/`中`ref/<tfm>/`的或目錄至少包含警告訊息中指定之[目標 Framework 標記（TFM）](../target-frameworks.md)的一個檔案。</span><span class="sxs-lookup"><span data-stu-id="ccb05-105">The `lib/<tfm>/` or `ref/<tfm>/` directory in the package contains at least one file for the [Target Framework Moniker (TFM)](../target-frameworks.md) specified in the warning message.</span></span> <span data-ttu-id="ccb05-106">不過，檔案中`nuspec`的這個 TFM 不存在任何相依性群組。</span><span class="sxs-lookup"><span data-stu-id="ccb05-106">However, no dependency group exists for this TFM in the `nuspec` file.</span></span> <span data-ttu-id="ccb05-107">這可能會導致套件取用者認為套件與 TFM 不相容。</span><span class="sxs-lookup"><span data-stu-id="ccb05-107">This may cause package consumers to believe the package is not compatible with the TFM.</span></span> <span data-ttu-id="ccb05-108">如果指定 TFM 的元件與相依性群組中定義的相容 TFM 有不同的相依性，則使用封裝的專案可能會遇到執行時間失敗。</span><span class="sxs-lookup"><span data-stu-id="ccb05-108">If the assemblies for the specified TFM have different dependencies to the compatible TFM defined in the dependencies group, the project using the package may experience runtime failures.</span></span>

### <a name="solution"></a><span data-ttu-id="ccb05-109">方案</span><span class="sxs-lookup"><span data-stu-id="ccb05-109">Solution</span></span>

* <span data-ttu-id="ccb05-110">在專案上執行 NuGet 的套件目標</span><span class="sxs-lookup"><span data-stu-id="ccb05-110">Run NuGet's pack target on the project</span></span>

<span data-ttu-id="ccb05-111">可能的話，請使用[NuGet 的 MSBuild 套件目標](../msbuild-targets.md)，因為它會自動將元件 tfm 與專案的目標架構中的相依性群組進行比對。</span><span class="sxs-lookup"><span data-stu-id="ccb05-111">If possible, use [NuGet's MSBuild pack target](../msbuild-targets.md), as it automatically matches assembly TFMs with dependency groups from the project's target frameworks.</span></span> <span data-ttu-id="ccb05-112">請注意，您的專案`PackageReference`必須用於自己的 NuGet 相依性。</span><span class="sxs-lookup"><span data-stu-id="ccb05-112">Note that your project must use `PackageReference` for its own NuGet dependencies.</span></span> <span data-ttu-id="ccb05-113">如果您的專案使用了 config.xml，您就必須使用`nuget.exe pack` `nuspec`和檔案。</span><span class="sxs-lookup"><span data-stu-id="ccb05-113">If your project uses packages.config, you need to use `nuget.exe pack` and a `nuspec` file.</span></span>

* <span data-ttu-id="ccb05-114">手動編輯`nuspec`檔案</span><span class="sxs-lookup"><span data-stu-id="ccb05-114">Manually edit the `nuspec` file</span></span>

<span data-ttu-id="ccb05-115">如果您使用自訂`nuspec`檔案，我們建議每個存在`lib/`或`ref/`元件的 TFM 都應該具有相符的相依性群組，即使相依性與下一個相容的 TFM 相同也一樣。</span><span class="sxs-lookup"><span data-stu-id="ccb05-115">If you are using a custom `nuspec` file, we recommend each TFM for which `lib/` or `ref/` assemblies exist should have a matching dependency group, even if the dependencies are the same as the next compatible TFM.</span></span> <span data-ttu-id="ccb05-116">例如，如果封裝包含`netstandard1.0`和`netstandard2.0`元件，而且兩者的相依性都相同，建議您將這兩個 tfm 列為具有重複相依性專案的相依性群組。</span><span class="sxs-lookup"><span data-stu-id="ccb05-116">For example, if a package contains `netstandard1.0` and `netstandard2.0` assemblies, and the dependencies are the same for both, we recommend both TFMs be listed as dependency groups with duplicate dependency items.</span></span>

<span data-ttu-id="ccb05-117">請注意，元件路徑中使用的 TFM 識別碼會使用與相依性群組中所使用的 TFM 識別碼不同的格式。</span><span class="sxs-lookup"><span data-stu-id="ccb05-117">Note that the TFM identifier used in the assembly paths use a different format to the TFM identifier used in dependency groups.</span></span> <span data-ttu-id="ccb05-118">警告訊息會指定要在相依性群組中使用的正確名稱。</span><span class="sxs-lookup"><span data-stu-id="ccb05-118">The warning message specifies the correct name to use in the dependency group.</span></span> <span data-ttu-id="ccb05-119">如果您的封裝沒有該目標 framework 的任何相依性，請使用空的群組。</span><span class="sxs-lookup"><span data-stu-id="ccb05-119">If your package does not have any dependencies for that target framework, use an empty group.</span></span> <span data-ttu-id="ccb05-120">例如：</span><span class="sxs-lookup"><span data-stu-id="ccb05-120">For example:</span></span>

```xml
<package>
  <metadata>
    ...
    <dependencies>
      <group targetFramework=".NETFramework4.7.2" />
    </dependencies>
  </metadata>
  ...
<package>
```

* <span data-ttu-id="ccb05-121">`lib/`移除或檔案`ref/`</span><span class="sxs-lookup"><span data-stu-id="ccb05-121">Remove the `lib/` or `ref/` files</span></span>

<span data-ttu-id="ccb05-122">如果您不想要讓套件與報告的 TFM 相容，請修改您的專案，讓該`lib/<tfm>/` TFM `ref/<tfm>/`的套件中沒有或檔案。</span><span class="sxs-lookup"><span data-stu-id="ccb05-122">If you do not wish your package to be compatible with the reported TFM, modify your project such that no `lib/<tfm>/` or `ref/<tfm>/` files are in the package for that TFM.</span></span> <span data-ttu-id="ccb05-123">例如，如果警告指出要將`.NETFramework4.7.2`的相依性群組加入`nuspec`至，則從封裝中移除`lib/net472/*`任何`ref/net472/*`和檔案。</span><span class="sxs-lookup"><span data-stu-id="ccb05-123">For example, if the warning says to add a dependency group for `.NETFramework4.7.2` to the `nuspec`, then remove any `lib/net472/*` and `ref/net472/*` files from your package.</span></span>
